services:
  # 1. Java Backend (Web Service)
  - type: web
    name: staybooking-backend
    env: java             # Для Java використовуємо env: java (runtime не підтримується в YAML)
    plan: free
    region: frankfurt     # Web-сервіси МАЮТЬ мати регіон
    rootDir: backend
    buildCommand: mvn clean install -DskipTests
    startCommand: java -jar target/*.jar
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: prod
      - key: JAVA_VERSION
        value: 17
      - key: POSTGRES_URL
        sync: false
      - key: POSTGRES_USER
        sync: false
      - key: POSTGRES_PASSWORD
        sync: false

  # 2. Frontend (Static Site)
  - type: web
    name: staybooking-frontend
    env: static           # Для статичних сайтів використовуємо env: static
    plan: free
    # РЕГІОН ВИДАЛЕНО: Статичні сайти в Render працюють через Global CDN, тому регіон для них — помилка
    buildCommand: npm install && npm run build
    staticPublishPath: ./dist
    envVars:
      - key: VITE_API_BASE_URL
        fromService:
          name: staybooking-backend
          type: web
          property: host
